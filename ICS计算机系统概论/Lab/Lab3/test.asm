;the system booting code                        .ORIG   x0200            LD      R6, OS_SP                        LD      R0, USER_PSR            ADD     R6, R6, #-1            STR     R0, R6, #0                        LD      R0, USER_PC            ADD     R6, R6, #-1            STR     R0, R6, #0                        AND     R2,R2,#0            AND     R3,R3,#0            LD      R2,KB            STI     R2,KBSR            LD      R3,B            STI     R3,A                        RTI OS_SP       .FILL   x3000USER_PSR    .FILL   x8002USER_PC     .FILL   x3000KBSR        .FILL   xFE00KB          .FILL   x4000A           .FILL   x0180B           .FILL   x0800            .END                       ;the interrupt service routine            .ORIG   x0800                        ;LD      R0,ASCII2            LDI     R0, KBDR            OUTBACK        RTIASCII2      .FILL   #48    saveR0      .BLKW   #1KBDR        .FILL   xFE02            .END            ;the user program            .ORIG   x3000            AND     R0,R0,#0            AND     R1,R1,#0            AND     R2,R2,#0                        LD      R1,NUMBER            LD      R2,NENTERLOOP                    ADD     R0,R1,#0            JSR     DELAY            OUT            ADD     R2,R2,#-1            BRnp    LOOP                        LD      R0,ASCII            OUT            LD      R2,NENTER            BRnzp   LOOP        DELAY 		ST      R1, DELAY_R1 			LD      R1, DELAY_COUNTDELAY_LOOP  ADD     R1, R1, #-1 			BRnp    DELAY_LOOP 			LD      R1, DELAY_R1 			RET                    HALT            ASCII       .FILL   #13NENTER      .FILL   #40NUMBER      .FILL   #55DELAY_COUNT .FILL   #1800DELAY_R1 	.BLKW   #1            .END